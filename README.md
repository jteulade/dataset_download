# Sentinel Data Download Tool

A simple tool to explore Sentinel-2 data for cities and download Sentinel-2 tiles.

## Prerequisites

- Python 3.6 or higher
- Required Python packages: see `requirements.txt`

## Installation

1. Clone or download this repository
2. Install the required packages:
   ```
   pip install -r requirements.txt
   ```
3. Make the scripts executable:
   ```
   chmod +x download_from_json.py city_explorer.py
   ```

## Authentication

To download tiles, you need a valid Copernicus Data Space API token:

1. Register for an account at [Copernicus Data Space Ecosystem](https://dataspace.copernicus.eu/)
2. The scripts will automatically handle token generation and refresh

## Main Scripts

### 1. City Explorer (`city_explorer.py`)

This script queries Sentinel-2 Global Mosaics data for cities and creates an interactive map visualization.

#### Basic Usage

```bash
python city_explorer.py --cities-csv worldcities.csv --num-cities 5
```

#### Key Arguments

- `--cities-csv`: Path to the CSV file containing city data (required)
- `--num-cities`: Number of cities to select (default: 20)
- `--population-min`: Minimum population threshold for cities (default: 500000)
- `--year-filter`: Year to filter for (default: "2023")
- `--random-distance`: Distance in kilometers for random points from cities (default: 100)
- `--ensure-on-land`: Only generate random points on land (default: True)

#### Output

- A CSV file with the selected cities
- JSON files with the query results
- An interactive HTML map showing all the data

### 2. Tile Downloader (`download_from_json.py`)

This script downloads Sentinel-2 tiles from JSON files generated by the city explorer.

#### Basic Usage

```bash
python download_from_json.py --json-file results/your_generated_file.json --output-dir downloads
```

#### Key Arguments

- `--json-file`: Path to the JSON file containing tile information (required)
- `--output-dir`: Directory to save downloaded files (default: "downloads")

## Example Workflow

1. Run the city explorer to find Sentinel-2 data:
   ```bash
   python city_explorer.py --cities-csv worldcities.csv --num-cities 3
   ```

2. Use the output JSON file to download the tiles:
   ```bash
   python download_from_json.py --json-file results/S2_GlobalMosaics_2023_unified_[timestamp].json --output-dir downloads
   ```

## Directory Structure

```
./
├── city_explorer.py             # Script to find Sentinel-2 data for cities
├── download_from_json.py        # Script to download Sentinel-2 tiles
├── requirements.txt             # Project dependencies
├── worldcities.csv              # Dataset of world cities
├── src/                         # Source code package
├── data/                        # Data storage
├── results/                     # Results storage
└── downloads/                   # Downloaded tiles storage
```

## License

This project is open source and available under the MIT License. 